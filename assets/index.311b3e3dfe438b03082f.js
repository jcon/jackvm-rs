(()=>{"use strict";var e,n,t,r,o,a={160:(e,n,t)=>{t.a(e,(async e=>{t.d(n,{io:()=>o.io});var r=t(314),o=t(304),a=e([o,r]);[o,r]=a.then?await a:a}))},304:(e,n,t)=>{t.a(e,(async r=>{t.d(n,{io:()=>C,h4:()=>T,ug:()=>L,AP:()=>I,G6:()=>M,m_:()=>P,h9:()=>$,Dz:()=>F,kF:()=>D,wp:()=>H,NI:()=>W,Cf:()=>q,AT:()=>R,Vl:()=>G,S0:()=>J,SE:()=>B,wl:()=>N,jm:()=>X,GJ:()=>U,Gr:()=>V,O8:()=>z,jL:()=>Q,Rs:()=>Y,XJ:()=>Z,HQ:()=>K,Mw:()=>ee,nM:()=>ne,$2:()=>te,I1:()=>re,Ic:()=>oe,dr:()=>ae,Zt:()=>ce,XP:()=>_e,M1:()=>ie,fY:()=>ue,Or:()=>le,hm:()=>fe,pW:()=>se});var o=t(314);e=t.hmd(e);var a=r([o]);o=(a.then?await a:a)[0];let c=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});c.decode();let _=null;function i(){return null!==_&&_.buffer===o.memory.buffer||(_=new Uint8Array(o.memory.buffer)),_}function u(e,n){return c.decode(i().subarray(e,e+n))}const l=new Array(32).fill(void 0);l.push(void 0,null,!0,!1);let f=l.length;function s(e){f===l.length&&l.push(l.length+1);const n=f;return f=l[n],l[n]=e,n}function d(e){return l[e]}function b(e){const n=d(e);return function(e){e<36||(l[e]=f,f=e)}(e),n}function g(e){return null==e}let w=null,p=null;function m(){return null!==p&&p.buffer===o.memory.buffer||(p=new Int32Array(o.memory.buffer)),p}function h(e){const n=typeof e;if("number"==n||"boolean"==n||null==e)return`${e}`;if("string"==n)return`"${e}"`;if("symbol"==n){const n=e.description;return null==n?"Symbol":`Symbol(${n})`}if("function"==n){const n=e.name;return"string"==typeof n&&n.length>0?`Function(${n})`:"Function"}if(Array.isArray(e)){const n=e.length;let t="[";n>0&&(t+=h(e[0]));for(let r=1;r<n;r++)t+=", "+h(e[r]);return t+="]",t}const t=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(t.length>1))return toString.call(e);if(r=t[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}let y=0,v=new("undefined"==typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8");const x="function"==typeof v.encodeInto?function(e,n){return v.encodeInto(e,n)}:function(e,n){const t=v.encode(e);return n.set(t),{read:e.length,written:t.length}};function E(e,n,t){if(void 0===t){const t=v.encode(e),r=n(t.length);return i().subarray(r,r+t.length).set(t),y=t.length,r}let r=e.length,o=n(r);const a=i();let c=0;for(;c<r;c++){const n=e.charCodeAt(c);if(n>127)break;a[o+c]=n}if(c!==r){0!==c&&(e=e.slice(c)),o=t(o,r,r=c+3*e.length);const n=i().subarray(o+c,o+r);c+=x(e,n).written}return y=c,o}function j(e,n,t,r){const a={a:e,b:n,cnt:1,dtor:t},c=(...e)=>{a.cnt++;const n=a.a;a.a=0;try{return r(n,a.b,...e)}finally{0==--a.cnt?o.__wbindgen_export_2.get(a.dtor)(n,a.b):a.a=n}};return c.original=a,c}function S(e,n){o._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__ha94bd12ae0a9463d(e,n)}function k(e,n,t){o._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h3eb71c769e716cb8(e,n,s(t))}function A(e){return function(){try{return e.apply(this,arguments)}catch(e){o.__wbindgen_exn_store(s(e))}}}let O=null;class C{static __wrap(e){const n=Object.create(C.prototype);return n.ptr=e,n}free(){const e=this.ptr;this.ptr=0,o.__wbg_jackvmplayer_free(e)}constructor(e){var n=o.jackvmplayer_new(s(e));return C.__wrap(n)}load(e){var n=E(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=y;o.jackvmplayer_load(this.ptr,n,t)}addHaltListener(e){o.jackvmplayer_addHaltListener(this.ptr,s(e))}isStopped(){return 0!==o.jackvmplayer_isStopped(this.ptr)}restart(){o.jackvmplayer_restart(this.ptr)}}const T=function(e,n){return s(u(e,n))},L=function(e){b(e)},I=function(e,n){alert(u(e,n))},M=function(e){const n=b(e).original;return 1==n.cnt--&&(n.a=0,!0)},P=function(e){return s(d(e))},$=function(){return s(new Error)},F=function(e,n){var t=E(d(n).stack,o.__wbindgen_malloc,o.__wbindgen_realloc),r=y;m()[e/4+1]=r,m()[e/4+0]=t},D=function(e,n){try{console.error(u(e,n))}finally{o.__wbindgen_free(e,n)}},H=function(e){return d(e)instanceof Window},W=function(e){var n=d(e).document;return g(n)?0:s(n)},q=A((function(e,n){return d(e).requestAnimationFrame(d(n))})),R=function(e){var n=d(e).body;return g(n)?0:s(n)},G=A((function(e,n,t){return s(d(e).createElement(u(n,t)))})),J=A((function(e,n,t,r){d(e).addEventListener(u(n,t),d(r))})),B=A((function(e,n,t){return s(new ImageData((r=e,a=n,(null!==O&&O.buffer===o.memory.buffer||(O=new Uint8ClampedArray(o.memory.buffer)),O).subarray(r/1,r/1+a)),t>>>0));var r,a})),N=function(e){console.log(d(e))},X=function(e){return d(e)instanceof HTMLElement},U=function(e){return d(e)instanceof CanvasRenderingContext2D},V=A((function(e,n,t,r){d(e).putImageData(d(n),t,r)})),z=A((function(e,n){return s(d(e).appendChild(d(n)))})),Q=function(e){return d(e)instanceof HTMLCanvasElement},Y=function(e,n){d(e).width=n>>>0},Z=function(e,n){d(e).height=n>>>0},K=A((function(e,n,t){var r=d(e).getContext(u(n,t));return g(r)?0:s(r)})),ee=A((function(e,n){return s(Reflect.get(d(e),d(n)))})),ne=A((function(e,n){return s(d(e).call(d(n)))})),te=function(e,n){return s(new Function(u(e,n)))},re=A((function(){return s(self.self)})),oe=A((function(){return s(window.window)})),ae=A((function(){return s(globalThis.globalThis)})),ce=A((function(){return s(t.g.global)})),_e=function(e){return void 0===d(e)},ie=function(e,n){const t=d(n);var r="number"==typeof t?t:void 0;(null!==w&&w.buffer===o.memory.buffer||(w=new Float64Array(o.memory.buffer)),w)[e/8+1]=g(r)?0:r,m()[e/4+0]=!g(r)},ue=function(e,n){var t=E(h(d(n)),o.__wbindgen_malloc,o.__wbindgen_realloc),r=y;m()[e/4+1]=r,m()[e/4+0]=t},le=function(e,n){throw new Error(u(e,n))},fe=function(e,n,t){return s(j(e,n,22,S))},se=function(e,n,t){return s(j(e,n,22,k))}}))},314:(e,n,t)=>{var r=([r])=>t.v(n,e.id,"320a0c70c85f4ee92bb0",{"./jackvm_player_bg.js":{__wbindgen_string_new:r.h4,__wbindgen_object_drop_ref:r.ug,__wbg_alert_aa4afae7063304ea:r.AP,__wbindgen_cb_drop:r.G6,__wbindgen_object_clone_ref:r.m_,__wbg_new_59cb74e423758ede:r.h9,__wbg_stack_558ba5917b466edd:r.Dz,__wbg_error_4bb6c2a97407129a:r.kF,__wbg_instanceof_Window_49f532f06a9786ee:r.wp,__wbg_document_c0366b39e4f4c89a:r.NI,__wbg_requestAnimationFrame_ef0e2294dc8b1088:r.Cf,__wbg_body_c8cb19d760637268:r.AT,__wbg_createElement_99351c8bf0efac6e:r.Vl,__wbg_addEventListener_6a37bc32387cb66d:r.S0,__wbg_newwithu8clampedarray_32a8c1cd1f7ae859:r.SE,__wbg_log_f2e13ca55da8bad3:r.wl,__wbg_instanceof_HtmlElement_ed44c8f443dbd619:r.jm,__wbg_instanceof_CanvasRenderingContext2d_1d38418d1d6c8b34:r.GJ,__wbg_putImageData_5f6666a81288bdcf:r.Gr,__wbg_appendChild_7c45aeccd496f2a5:r.O8,__wbg_instanceof_HtmlCanvasElement_7bd3ee7838f11fc3:r.jL,__wbg_setwidth_1d0e975feecff3ef:r.Rs,__wbg_setheight_7758ee3ff5c65474:r.XJ,__wbg_getContext_3db9399e6dc524ff:r.HQ,__wbg_get_85e0a3b459845fe2:r.Mw,__wbg_call_951bd0c6d815d6f1:r.nM,__wbg_newnoargs_7c6bd521992b4022:r.$2,__wbg_self_6baf3a3aa7b63415:r.I1,__wbg_window_63fc4027b66c265b:r.Ic,__wbg_globalThis_513fb247e8e4e6d2:r.dr,__wbg_global_b87245cd886d7113:r.Zt,__wbindgen_is_undefined:r.XP,__wbindgen_number_get:r.M1,__wbindgen_debug_string:r.fY,__wbindgen_throw:r.Or,__wbindgen_closure_wrapper86:r.hm,__wbindgen_closure_wrapper88:r.pW}});t.a(e,(e=>{var n=e([t(304)]);return n.then?n.then(r):r(n)}),1)},85:()=>{},473:(e,n,t)=>{t.a(e,(async e=>{var n=t(160),r=e([n]);n=(r.then?await r:r)[0];const o=document.getElementById("screen-container");let a=new n.io(o),c=o.querySelector("canvas");["sm:w-512px","sm:h-256px","lg:w-1024px","lg:h-512px"].forEach((e=>{c.classList.add(e)})),document.querySelector("#editor").addEventListener("change",(e=>{updateProgram()}));let _=document.querySelector("#play-overlay");_.addEventListener("click",(e=>(console.log("player clicked"),a.isStopped()&&(a.restart(),_.classList.toggle("hidden")),!1))),a.addHaltListener((()=>{_.classList.toggle("hidden")})),window.dispatchEvent(new CustomEvent("JackVmPlayerLoaded",{detail:a}))}))}},c={};function _(e){if(c[e])return c[e].exports;var n=c[e]={id:e,loaded:!1,exports:{}};return a[e](n,n.exports,_),n.loaded=!0,n.exports}e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",n="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",t=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},r=e=>!--e.r&&e(),o=(e,n)=>e?e.push(n):r(n),_.a=(a,c,_)=>{var i,u,l,f=_&&[],s=a.exports,d=!0,b=!1,g=(n,t,r)=>{b||(b=!0,t.r+=n.length,n.map(((n,o)=>{n[e](t,r)})),b=!1)},w=new Promise(((e,n)=>{l=n,u=()=>{e(s),t(f),f=0}}));w[n]=s,w[e]=(e,n)=>{if(d)return r(e);i&&g(i,e,n),o(f,e),w.catch(n)},a.exports=w,c((a=>{if(!a)return u();var c,_;i=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[e])return a;if(a.then){var c=[];a.then((e=>{_[n]=e,t(c),c=0}));var _={[e]:(e,n)=>{o(c,e),a.catch(n)}};return _}}return{[e]:e=>{r(e)},[n]:a}})))(a);var l=new Promise(((e,t)=>{(c=()=>e(_=i.map((e=>e[n])))).r=0,g(i,c,t)}));return c.r?l:_})).then(u,l),d=!1},_.d=(e,n)=>{for(var t in n)_.o(n,t)&&!_.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},_.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),_.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),_.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;_.g.importScripts&&(e=_.g.location+"");var n=_.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var t=n.getElementsByTagName("script");t.length&&(e=t[t.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),_.p=e})(),_.v=(e,n,t,r)=>{var o=fetch(_.p+""+t+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(o,r).then((n=>Object.assign(e,n.instance.exports))):o.then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,r))).then((n=>Object.assign(e,n.instance.exports)))},_(473),_(85)})();
//# sourceMappingURL=index.311b3e3dfe438b03082f.js.map